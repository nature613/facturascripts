<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <title>{$fsc->empresa->nombre}</title>
   <meta name="description" content="FacturaScripts es un software libre bajo licencia GNU/AGPL." />
   <link rel="shortcut icon" href="img/favicon.ico" />
   <link rel="stylesheet" type="text/css" href="css/{$fsc->css_file}" />
   <script type="text/javascript" src="js/jquery.js"></script>
   <script type="text/javascript">
      $(document).ready(function() {
         document.f_login.password.focus();
      });
   </script>
   {if condition="$demo"}
   <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-417932-8']);
      _gaq.push(['_setDomainName', 'facturascripts.com']);
      _gaq.push(['_trackPageview']);
      (function() {
         var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
         ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
         var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
   </script>
   {/if}
</head>
<body>
   <div id="login_header">
      <form name="f_login" action="index.php?nlogin={$nlogin}" method="post">
      <table width="100%">
         <tr>
            <td>
               <a id="fs_logo2" href="index.php">
                  {if condition="$demo"}FacturaScripts{else}{$fsc->empresa->nombre}{/if}
               </a>
            </td>
            <td align="right">
               <div id="login_box">
               Usuario:
               <select name="user">
               {loop name="$fsc->user->all()"}
                  {if condition="$value->nick == $nlogin"}
                  <option value="{$value->nick}" selected>{$value->nick}</option>
                  {else}
                  <option value="{$value->nick}">{$value->nick}</option>
                  {/if}
               {/loop}
               </select>
               &nbsp; Contraseña:
               <input type="password" name="password" size="6" maxlength="20"/>
               &nbsp; <input type="submit" value="entrar"/>
               </div>
            </td>
         </tr>
      </table>
      </form>
   </div>
   <div class="main_div">
      {if condition="$fsc->get_errors()"}
         <div class="error">
            <ul>{loop="$fsc->get_errors()"}<li>{$value}</li>{/loop}</ul>
         </div>
      {/if}
      {if condition="$fsc->get_messages()"}
         <div class="message">
            <ul>{loop="$fsc->get_messages()"}<li>{$value}</li>{/loop}</ul>
         </div>
      {/if}
      {if condition="$demo"}
         <div class="advice">Puedes entrar con cualquier usuario y la contraseña <b>demo</b>.</div>
      {/if}
      <div class="rounded">
         <h1>Información importante:</h1>
         <table width="100%">
            <tr>
               <td>
                  <ul>
                     <li>
                        <a target="_blank" href='http://code.google.com/p/facturascripts/'>FacturaScripts</a>
                        es un software libre bajo licencia <a href='COPYING'>GNU/AGPL</a>.
                     </li>
                     <li>
                        Si tienes cualquier problema o sugerencia no dudes en
                        <a target="_blank" href="http://code.google.com/p/facturascripts/issues/list">reportar un error</a>.
                     </li>
                     <li>
                        Si quieres instalarlo en tu servidor lee este
                        <a target="_blank" href="http://neorazorx.blogspot.com/2012/03/primeros-pasos-con-facturascripts-09.html">
                        tutorial de instalación</a>.
                     </li>
                     <li>
                        Puedes seguir el desarrollo de FacturaScripts a través de mi
                        <a target="_blank" href="http://www.neorazorx.com">mi blog</a>
                        o mi twitter <a target="_blank" href="https://twitter.com/neorazorx">@neorazorx</a>.
                     </li>
                  </ul>
               </td>
               {if condition="$demo"}
               <td valign="top" align="right">
                  <div id="fb-root"></div>
                  <div class="fb-like" data-send="true" data-layout="box_count" data-width="90" data-show-faces="false"></div>
                  <script>(function(d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id)) return;
                    js = d.createElement(s); js.id = id;
                    js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1";
                    fjs.parentNode.insertBefore(js, fjs);
                  }(document, 'script', 'facebook-jssdk'));</script>
               </td>
               <td valign="top" align="right">
                  <a href="https://twitter.com/share" class="twitter-share-button" data-lang="es" data-count="vertical" data-related="neorazorx">Tweet</a>
                  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
               </td>
               <td valign="top" align="right">
                  <div class="g-plusone" data-size="tall"></div>
                  <script type="text/javascript">
                    window.___gcfg = {lang: 'es'};
                    (function() {
                      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                      po.src = 'https://apis.google.com/js/plusone.js';
                      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                    })();
                  </script>
               </td>
               {/if}
            </tr>
         </table>
      </div>
      <div class="rounded">
         <h1>Novedades:</h1>
         <ul>
            <li>
               30/01/2013: Agrupar albaranes:
               <ul>
                  <li>
                     Solucionado el bug que hacía que se marcase la casilla 'generar facturas individuales'
                     por error al pulsar el botón marcar todo.
                  </li>
                  <li>Ahora recuerda el último cliente/proveedor.</li>
               </ul>
            </li>
            <li>
               29/01/2013:
               <ul>
                  <li>
                     Añadida comprobación para que el fallo en Memcache muestre un error.
                     Ahora FacturaScripts puede funcionar sin Memcache, excepto para las operaciones
                     donde sea imprescindible.
                  </li>
                  <li>
                     Ahora se muestra un error y finaliza si se comprueba que no se pueda escribir
                     en el directorio temporal.
                  </li>
                  <li>
                     Con estos cambios será más sencillo desplegar FacturaScripts sobre entornos
                     poco amigables para los desarrolladores web como Windows.
                  </li>
                  <li>
                     Las páginas de agrupar albaranes ahora también permiten generar facturas
                     individuales para cada albarán ¿Para qué? Pues para poder facturar un montón
                     de albaranes de una sola pasada.
                  </li>
               </ul>
            </li>
            <li>
               28/01/2013:
               <ul>
                  <li>El menú desplegable de usuarios ya se adapata al ancho de la página.</li>
                  <li>
                     Mejorados los formulario de admin_paginas, admin_usuario, contibilidad_subcuenta,
                     general_agrupar_albaranes_cli y general_agrupar_albaranes_pro. Añadidos botones para marcar
                     o desmarcar todas las casillas con un solo clic.
                  </li>
                  <li>
                     Añadidos botones de guardar en la parte inferior de los formularios de albaranes de clientes
                     y proveedores.
                  </li>
                  <li>
                     La página Informes > Facturas ahora permite especificar las fecha desde y hasta para
                     seleccionar las facturas correspondientes.
                  </li>
               </ul>
            </li>
            <li>
               19/01/2013:
               <ul>
                  <li>
                     Las páginas de albaranes ya permiten modificar el impuesto de cada línea. Además los
                     algoritmos para recalcular los totales y totales+iva de las líneas ahora modifican el
                     pvp cuando el descuento precalculado es negativo.
                  </li>
                  <li>
                     Se incluye un archivo interno con los datos de balances, grupos, epígrafes, cuentas
                     y subcuentas de un ejercicio estándar.
                  </li>
                  <li>Solucionado el bug que impedía limpiar búsquedas antiguas de artículos.</li>
               </ul>
            </li>
            <li>
               10/01/2013:
               <ul>
                  <li>
                     La página "contabilidad > ejercicios > ejercicio" ahora permite modificar la
                     longitud de las subcuentas. También muestra enlaces a los asientos de apertura,
                     cierre y pédidas y ganancias. Y el proceso de importación ahora genera también
                     las subcuentas para cada cliente y para proveedores.
                  </li>
               </ul>
            </li>
            <li>
               09/01/2013:
               <ul>
                  <li>
                     Ya se pueden exportar e importar todos los datos de un ejercicio (balances,
                     grupos, epígrafes, cuentas, cuentas especiales y subcuentas) desde la página
                     del ejercicio. Así como visualizar sus grupos, epígrafes, cuentas y subcuentas.
                  </li>
                  <li>La página de "contabilidad > cuentas" ahora muestra las cuentas especiales también.</li>
                  <li>Nueva página "contabilidad > balances". Y nueva página para cada balance.</li>
                  <li>Nuevos modelos: balance_cuentas, balance_cuentas_a y cuentas_especial.</li>
                  <li>Nuevas funciones fs_db::nextval() y fs_db::lastval().</li>
                  <li>Mejorado el algoritmo de comprobación de las tablas en la clase fs_model.</li>
                  <li>
                     Nueva clase fs_default_items para asignar los elementos por defecto de la sesión:
                     página de inicio, ejercicio, serie, forma de pago, etc...
                  </li>
                  <li>Mejorada la compatibilidad con los módulo oficiales de eneboo.</li>
               </ul>
            </li>
            <li>
               01/01/2013:
               <ul>
                  <li>
                     La página por defecto del usuario se guarda ahora en la base de datos,
                     al igual que el ejercicio por defecto.
                  </li>
                  <li>Mejorada la presentación de albaranes y facturas.</li>
                  <li>Nuevos modelos: epigrafe y grupo_epigrafes.</li>
                  <li>Ahora cada ejercicio tiene su página.</li>
                  <li>
                     Modificado el script de nuevo asiento para hacerlo más sencillo y
                     permitir calcular e introducir el iva y la base imponible de la contrapartida.
                  </li>
                  <li>
                     Solucionado el fallo en la función test() del modelo artículo que devuelve un error
                     con las descripciones de más de 100 caracteres en lugar de simplemente acortarlas.
                  </li>
                  <li>
                     Solucionado el fallo del script importar_familia que hacía que el script continuase
                     incluso aunque se produjeran errores.
                  </li>
               </ul>
            </li>
            <li>
               10/12/2012:
               <ul>
                  <li>
                     Las páginas de agrupar albaranes muestran ahora todos los resultados
                     marcados para su agrupación.
                  </li>
                  <li>Al modificar la fecha de una factura se modifica también la fecha de su asiento.</li>
                  <li>
                     Nueva página de informes de facturas. Permite generar los listados
                     de facturas emitidas/recibidas por mes.
                  </li>
                  <li>
                     Nuevo script para agrupar albaranes de proveedores desde General >
                     albaranes de proveedor > agrupar.
                  </li>
                  <li>Mejorada la presentación de las búsquedas en Contabilidad > Cuentas.</li>
                  <li>Las páginas de facturas ahora muestran la lista de huecos.</li>
                  <li>Las páginas de bancos ahora muestran las cuentas bancarias asociadas.</li>
                  <li>Las páginas de subcuentas ahora muestran todas las páginas disponibles.</li>
                  <li>
                     Las partidas de las subcuentas se ordenan ahora por número de asiento.
                     Además ya se pueden puntear las partidas.
                  </li>
                  <li>
                     Ahora el libro mayor de cada subcuenta se genera previamente via cron.
                     Esta es la mejor solución que se me ha ocurrido para generar PDFs de cientos de páginas.
                  </li>
               </ul>
            </li>
            <li>
               05/12/2012:
               <ul>
                  <li>
                     Modificados los algoritmos para generar números de facturas. Ahora se usan los huecos,
                     seleccionando la fecha apropiada para que la numeración de facturas sea continua,
                     tanto en número como en fecha.
                  </li>
                  <li>Modificados los algoritmos para generar PDF de facturas. Ahora tienen 40 líneas por página.</li>
                  <li>Nuevos modelos: balance, banco, sucursal, cuenta_banco y recibo_cliente.</li>
                  <li>Optimizado el algoritomo para generar el libro mayor de una subcuenta.</li>
               </ul>
            </li>
            <li>
               01/12/2012:
               <ul>
                  <li>Añadido libro mayor a las subcuentas. Se genera un documento PDF.</li>
                  <li>Solucionado bug al modifcar el precio de un artículo en TPV > TPV yamyam.</li>
               </ul>
            </li>
            <li>
               30/11/2012:
               <ul>
                  <li>Nueva página para cada agente, junto con un listado de sus albaranes.</li>
                  <li>Mejoras en la aceleración de búsquedas de artículos.</li>
                  <li>Nuevo estilo para los menús.</li>
                  <li>Eliminado código deprecated: split y &=.</li>
                  <li>Añadidos campos número2 y numproveedor al formulario para crear nuevos albaranes.</li>
               </ul>
            </li>
         </ul>
      </div>
      {if condition="$db_history"}
      <div id="sql_history">
         <h1>Consultas SQL:</h1>
         <ol>{loop="$fsc->get_db_history()"}<li>{$value}</li>{/loop}</ol>
      </div>
      {/if}
   </div>
   <div class="footer">
      <table>
         <tr>
            <td class="left">
               CSS:
               {if condition="$fsc->css_file=='base.css'"}
                  <a class="selected" href="{$fsc->url()}&css_file=base.css">normal</a> |
                  <a href="{$fsc->url()}&css_file=touch.css">touch</a>
               {else}
                  <a href="{$fsc->url()}&css_file=base.css">normal</a> |
                  <a class="selected" href="{$fsc->url()}&css_file=touch.css">touch</a>
               {/if}
            </td>
            <td class="right">
               Consultas: {$fsc->selects()} |
               Transacciones: {$fsc->transactions()} |
               Tiempo de ejecución: {$fsc->duration()}
            </td>
         </tr>
      </table>
   </div>
</body>
</html>