{include="header"}

<script type="text/javascript">
	function fs_marcar_todo()
	{
		$('#f_enable_backup input:checkbox').prop('checked', true);
	}
	function fs_marcar_nada()
	{
		$('#f_enable_backup input:checkbox').prop('checked', false);
	}
	function soloestructura()
	{
		var evalor = document.getElementById('tipo_backup');
		evalor.value = "selestructura";		
		document.f_enable_backup['Oculto'].click();
	}
	function datosestructura()
	{
		var evalor = document.getElementById('tipo_backup');
		evalor.value = "seltodo";		
		document.f_enable_backup['Oculto'].click();
	}
</script>

{if condition="$fsc->cerrado!=true"}
	<div class="panel panel-info" style="margin: 5px;">
		<div class="panel-heading">
			<h3 class="panel-title">Backup de la Base de Datos MySQL</h3>
		</div>
		<br>
		<form name="f_enable_backup" id="f_enable_backup" enctype="multipart/form-data" action="index.php?page=backupms" method="post" class="form">
		   <div class="container-fluid">
			  <div class="row">
				 <div class="col-lg-2 col-md-2 col-sm-2">
					<div class="btn-group">
					   <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_todo()" title="Marcar todo">
						  <span class="glyphicon glyphicon-check"></span>
					   </button>
					   <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_nada()" title="Desmarcar todo">
						  <span class="glyphicon glyphicon-unchecked"></span>
					   </button>
					</div>
				 </div>
				 <div class="col-lg-4 col-lg-offset-2 col-md-4 col-md-offset-2 col-sm-4 col-sm-offset-2 text-center">
					 <a class="btn btn-sm btn-block btn-primary" onclick="this.disabled=true;" href="javascript:soloestructura()">
						<span class="glyphicon glyphicon-floppy-disk"></span>
						&nbsp; Respaldar Estructura de las Tablas Seleccionadas
					 </a>
					 <a class="btn btn-sm btn-block btn-primary" onclick="this.disabled=true;" href="javascript:datosestructura()">
						<span class="glyphicon glyphicon-floppy-disk"></span>
						&nbsp; Respaldar Estructura + Datos de las Tablas Seleccionadas
					 </a>
				 </div>
			  </div>
		   </div>
		   
		   <div class="table-responsive">
			  <table class="table table-hover">
				 <thead>
					<tr>
					   <th class="text-left">Tabla</th>
					   <th class="text-left">Columnas / Campos</th>
					</tr>
				 </thead>
				 {loop="$fsc->tabla"}
				 <tr>
					<td style="width:15%;">
					   <input class="checkbox-inline" type="checkbox" name="enabled[]" value="{$key}"/>
					   &nbsp;{$key}
					</td>
					<td>{$value}</td>
				 </tr>
				 {/loop}
			  </table>
		   </div>
		   
		   <div class="container-fluid">
			  <div class="row">
				 <div class="col-lg-2 col-md-2 col-sm-2">
					<div class="btn-group">
					   <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_todo()" title="Marcar todo">
						  <span class="glyphicon glyphicon-check"></span>
					   </button>
					   <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_nada()" title="Desmarcar todo">
						  <span class="glyphicon glyphicon-unchecked"></span>
					   </button>
					</div>
				 </div>
				 <div class="col-lg-4 col-lg-offset-2 col-md-4 col-md-offset-2 col-sm-4 col-sm-offset-2 text-center">
					 <a class="btn btn-sm btn-block btn-primary" onclick="this.disabled=true;" href="javascript:soloestructura()">
						<span class="glyphicon glyphicon-floppy-disk"></span>
						&nbsp; Respaldar Estructura de las Tablas Seleccionadas
					 </a>
					 <a class="btn btn-sm btn-block btn-primary" onclick="this.disabled=true;" href="javascript:datosestructura()">
						<span class="glyphicon glyphicon-floppy-disk"></span>
						&nbsp; Respaldar Estructura + Datos de las Tablas Seleccionadas
					 </a>
				 </div>
			  </div>
		   </div>
			<br>
			<input type="hidden" name="tipo_backup" id="tipo_backup" value="selestructura"/>
			<input type="submit" style="display:none" name="Oculto" id="Oculto">
		</form>
	</div>
{/if}

{include="footer"}