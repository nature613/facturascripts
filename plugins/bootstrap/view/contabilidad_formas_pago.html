{include="header"}

<!-- 
 NO HAY BOTÓN NUEVA FORMA DE PAGO EN EL BTN-TOOLBAR
-->

<script type="text/javascript">
   function fs_marcar_todo()
   {
      var i = 0;
      while( $("#delete_"+i).length > 0 )
      {
         $("#delete_"+i).prop('checked', true);
         i++;
      }
   }
   function fs_marcar_nada()
   {
      var i = 0;
      while( $("#delete_"+i).length > 0 )
      {
         $("#delete_"+i).attr('checked', false);
         i++;
      }
   }
   $(document).ready(function() {
      $("#b_nueva_forma_pago").click(function(event) {
         event.preventDefault();
         fs_show_popup('popup_nueva_forma_pago');
         document.f_nueva_forma_pago.codpago.focus();
      });
   });
</script>

<div class="popup" id="popup_nueva_forma_pago">
   <h3>Nueva forma de pago</h3>
   <form class="form-horizontal" class="form" role="form" name="f_nueva_forma_pago" action ="{$fsc->url()}" method="POST">
      <div class="form-group">
         <label for="codpago" class="col-sm-2 control-label">Código</label>
         <div class="col-sm-10">
            <input class="form-control" type="text" name="codpago" autocomplete="off"/>
         </div>
      </div>
      <div class="form-group">
         <label for="descripcion" class="col-sm-2 control-label">Descripción</label>
         <div class="col-sm-10">
            <input class="form-control" type="text" name="descripcion" autocomplete="off"/>
         </div>
      </div>
      <div class="form-group">
         <label for="genrecibos" class="col-sm-2 control-label">Generar Recibos</label>
         <div class="col-sm-10">
            <select name="genrecibos" class="form-control">
               <option value="Emitidos">Emitidos</option>
               <option value="Pagados">Pagados</option>
            </select>
          </div>
      </div>
      <div class="form-group">
         <label for="domiciliado" class="col-sm-2 control-label">Domiciliado</label>
         <div class="col-sm-10">
             <input class="form-control" type="checkbox" name="domiciliado" value="TRUE"/>
          </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10 text-right">
           <button class="btn btn-sm btn-primary pull-right" type="submit" value="Guardar" onclick="this.disabled=true;this.form.submit();" title="Guardar">
              <span class="glyphicon glyphicon-floppy-disk"></span>
              &nbsp; Guardar
           </button>
          </div>
      </div>
   </form>
</div>

<div class="well well-sm">
   <form action="{$fsc->url()}" method="POST">
      <div style="margin-bottom: 5px;">
         <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_todo()" value="Marcar todo" title="Marcar todo">
            <span class="glyphicon glyphicon-check"></span>
         </button>
         <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_nada()" value="Desmarcar todo" title="Desmarcar todo">
            <span class="glyphicon glyphicon-unchecked"></span>
         </button>
         <button class="btn btn-sm btn-primary pull-right" type="submit" value="Guardar" onclick="this.disabled=true;this.form.submit();" title="Guardar">
            <span class="glyphicon glyphicon-floppy-disk"></span>
            &nbsp; Guardar
         </button>
      </div>
      
      <br/>
      
      <div class="table-responsive">
         <table class="table table-hover">
            <tr>
               <th>Eliminar</th>
               <th align="left">Código</th>
               <th align="left">Descripción</th>
               <th>Generar Recibos</th>
               <th>Domiciliado</th>
            </tr>
            {loop="$fsc->forma_pago->all()"}
            <tr>
               <td align="center">
                  <input class="form-control" type="checkbox" id="delete_{$counter}" name="delete_{$counter}" value="TRUE"/>
               </td>
               <td>
                  {$value->codpago}
                  <input class="form-control" type="hidden" name="codpago_{$counter}" value="{$value->codpago}"/>
               </td>
               <td>
                  <input class="full form-control" type="text" name="descripcion_{$counter}" value="{$value->descripcion}" autocomplete="off"/>
               </td>
               <td align="center">
                  <select name="genrecibos_{$counter}" class="form-control">
                     <option value="Emitidos"{if condition="$value->genrecibos=='Emitidos'"} selected="selected"{/if}>Emitidos</option>
                     <option value="Pagados"{if condition="$value->genrecibos=='Pagados'"} selected="selected"{/if}>Pagados</option>
                  </select>
               </td>
               <td align="center">
                  <input class="form-control" type="checkbox" name="domiciliado_{$counter}" value="TRUE"{if condition="$value->domiciliado"} checked="TRUE"{/if}/>
               </td>
            </tr>
            {/loop}
            <tr>
               <td colspan="6">
                  <div class="new_line">
                     <a id="b_nueva_forma_pago" href="#">Nueva forma de pago</a>
                  </div>
               </td>
            </tr>
         </table>
      </div>
      
      <div style="margin-bottom: 5px;">
         <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_todo()" value="Marcar todo" title="Marcar todo">
            <span class="glyphicon glyphicon-check"></span>
         </button>
         <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_nada()" value="Desmarcar todo" title="Desmarcar todo">
            <span class="glyphicon glyphicon-unchecked"></span>
         </button>
         <button class="btn btn-sm btn-primary pull-right" type="submit" value="Guardar" onclick="this.disabled=true;this.form.submit();" title="Guardar">
            <span class="glyphicon glyphicon-floppy-disk"></span>
            &nbsp; Guardar
         </button>
      </div>
   </form>
</div>

{include="footer"}
