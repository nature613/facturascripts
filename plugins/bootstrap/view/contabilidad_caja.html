{include="header"}

<script type="text/javascript">
   function fs_marcar_todo()
   {
      $('#f_cajas input:checkbox').prop('checked', true);
   }
   function fs_marcar_nada()
   {
      $('#f_cajas input:checkbox').prop('checked', false);
   }
</script>

<div class="well well-sm">
   <form id="f_cajas" action="{$fsc->url()}" method="post">
      <div class="container-fluid" style="margin-bottom: 10px;">
         <div class="row">
            <div class="col-lg-4" style="padding-left: 0px;">
               <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_todo()">
                  <span class="glyphicon glyphicon-check"></span>
               </button>
               <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_nada()">
                  <span class="glyphicon glyphicon-unchecked"></span>
               </button>
            </div>
            <div class="col-lg-4" style="text-align: center;">
               <a class="btn btn-sm btn-danger" href="{$fsc->url()}&cerrar=TRUE">
                  <span class="glyphicon glyphicon-briefcase"></span>
                  &nbsp; cerrar caja
               </a>
            </div>
            <div class="col-lg-4" style="text-align: right; padding-right: 0px;">
               <button class="btn btn-sm btn-primary pull-right" type="submit" onclick="this.disabled=true;this.form.submit();">
                  <span class="glyphicon glyphicon-floppy-disk"></span>
                  &nbsp; Guardar
               </button>
            </div>
         </div>
      </div>
      
      <div class="table-responsive">
         <table class="table table-hover">
            <thead>
               <tr>
                  <th>Eliminar</th>
                  <th>Caja</th>
                  <th>Agente</th>
                  <th>Fecha inicial</th>
                  <th align="right">Dinero inicial</th>
                  <th>Fecha fin</th>
                  <th align="right">Diferencia</th>
                  <th align="right">Tickets</th>
               </tr>
            </thead>
            {loop="$fsc->resultados"}
            <tr>
               <td align="center">
                  <input type="checkbox" name="delete[]" value="{$value->id}"/>
               </td>
               <td align="center">{$value->fs_id}</td>
               <td align="center">
               {if condition="$value->agente"}
                  <a href="{$value->agente->url()}">{$value->agente->get_fullname()}</a>
               {else}
                  -
               {/if}
               </td>
               <td align="center">{$value->fecha_inicial}</td>
               <td align="right">{$fsc->show_precio($value->dinero_inicial)}</td>
               <td align="center">{$value->show_fecha_fin()}</td>
               <td align="right">{$fsc->show_precio($value->diferencia())}</td>
               <td align="right">{$value->tickets}</td>
            </tr>
            {else}
            <tr><td colspan="7" align="center">No hay datos</td></tr>
            {/loop}
         </table>
      </div>
      <ul class="pager" id="ul_paginador">
         <li class="previous{if condition="$fsc->anterior_url()==''"} disabled{/if}"><a href="{$fsc->anterior_url()}">&larr; anteriores</a></li>
         <li class="next{if condition="$fsc->siguiente_url()==''"} disabled{/if}"><a href="{$fsc->siguiente_url()}">siguientes &rarr;</a></li>
      </ul>
      
      <div>
         <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_todo()">
            <span class="glyphicon glyphicon-check"></span>
         </button>
         <button class="btn btn-sm btn-default" type="button" onclick="fs_marcar_nada()">
            <span class="glyphicon glyphicon-unchecked"></span>
         </button>
         <button class="btn btn-sm btn-primary pull-right" type="submit" onclick="this.disabled=true;this.form.submit();">
            <span class="glyphicon glyphicon-floppy-disk"></span>
            &nbsp; Guardar
         </button>
      </div>
   </form>
</div>

{include="footer"}